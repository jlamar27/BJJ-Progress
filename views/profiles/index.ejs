<%- include('../partials/header') %>

<div class="user-profile">
  <h1 class="profile-name"><%= userProfile.name %></h1>
  <div class="profile-details">
    <p class="profile-detail"><span class="detail-label">Age:</span> <span class="age-text"><%= userProfile.age %></span></p>
    <p class="profile-detail"><span class="detail-label">Belt Rank:</span> <span class="belt-rank-text"><%= userProfile.beltRank %></span></p>
  </div>
</div>




<span class="training-sessions-label">Training Sessions</span>
<div class="profile-sessions">
  <table class="session-table">
    <thead>
      <tr>
      </tr>
      <tr>
        <th>Date</th>
        <th>Details</th>
      </tr>
    </thead>
    <tbody>
      <% trainingSessions.forEach(function(session) { %>
      <tr>
        <td><%= session.date %></td>
        <td>
          <a href="#" class="view-session-button" data-session-id="<%= session._id %>">View Details</a>
        </td>
      </tr>
      <% }); %>
    </tbody>
  </table>
</div>


  <div class="profile-techniques">
    <p class="profile-heading">Techniques:</p>
    <table class="technique-table">
      <thead>
        <tr>
          <th>Technique Name</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <% userProfile.techniques.forEach(function(technique) { %>
        <tr>
          <td><%= technique.name %></td>
          <td><a href="/profiles/<%= userProfile._id %>/removeTech/<%= technique._id %>" class="remove-link">Remove</a></td>
        </tr>
        <% }); %>
      </tbody>
    </table>
  </div>

  <div class="profile-actions">
    <a href="/profiles/<%= userProfile._id %>/trainingSession" class="action-link">Create Training Session</a>
    <a href="<%= userProfile._id %>/addTech" class="action-link">Add Techniques</a>
  </div>
</div>

<!-- Modal container (hidden by default) -->
<div id="myModal" class="modal">
  <div class="modal-content">
    <span class="close" id="closeModal">&times;</span>
    <!-- Content of the training session details -->
    <h2>Training Session Details</h2>
    <p><strong>Date:</strong> <span id="sessionDate"></span></p>
    <!-- Add other session details here -->
  </div>
</div>

<%- include('../partials/footer') %>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const modal = document.getElementById('myModal');
  const closeModal = document.getElementById('closeModal');
  const viewSessionButtons = document.querySelectorAll('.view-session-button');
  const sessionDate = document.getElementById('sessionDate');

  // Function to open the modal
  function openModal(sessionId, date) {
    sessionDate.textContent = date;
    modal.style.display = 'block';
  }

  // Function to close the modal
  function closeModalFunction() {
    modal.style.display = 'none';
  }

  // Event listener to open the modal when a button is clicked
  viewSessionButtons.forEach(function (button) {
    button.addEventListener('click', function () {
      const sessionId = button.getAttribute('data-session-id');
      const sessionDate = button.getAttribute('data-session-date');
      openModal(sessionId, sessionDate);
    });
  });

  // Event listener to close the modal when the close button is clicked
  closeModal.addEventListener('click', closeModalFunction);
});
</script>
